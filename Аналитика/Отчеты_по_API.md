В ПланФиксе есть два способа получения данных отчетов по API: 


  * Сформировать [отчет по расписанию](Отчет_по_расписанию.md) и получить его данные через [REST API](../Интеграции/REST_API.md).

  * Запросить генерацию отчета через [REST API](../Интеграции/REST_API.md) и получить его данные, когда он будет сформирован.


Спецификация REST API доступна по [ссылке](https://help.planfix.com/restapidocs/). 


## Получение данных из отчета по расписанию через REST API


  * Создайте повторяющийся отчет.


  * Создайте токен авторизации для сотрудника, которому планируете отправлять отчет. Сохраненные данные отчета доступны только сотрудникам, которых выберете для отправки. Для создания токена перейдите в **Управление аккаунтом** — **Доступ к API** — **REST API** — **Создать новый токен** : 

    * в поле "Сотрудник / Контакт" укажите сотрудника для получения отчета по расписанию.

    * в поле "Разрешенных Scope" укажите report_readonly.


  * Получите по REST API список отчетов методом **/report/list** и найдите идентификатор нужного отчета в ответе (идентификатор отчета можно найти в адресной строке браузера).


  * Методом **/report/{id}/save/list** получите список сохраненных версий выбранного отчета.


  * Получите данные отчёта по идентификатору новой версии методом **/report/{id}/save/{saveId}/data**.


### Особенности получения данных


  * Сохраненные данные отчета доступны только сотрудникам, которых выберете для отправки.

  * Если отчет большой, то у версии будет несколько частей (чанков/chunks). При получении данных отчета необходимо передавать индекс чанка, чтобы получить все части. Сколько чанков содержит отчет видно в ответе метода **/report/{id}/save/list**.


## Генерация отчетов через REST API


  * Создайте токен авторизации для сотрудника, от имени которого будет формироваться отчет. Для создания токена перейдите в **Управление аккаунтом** — **Доступ к API** — **REST API** — **Создать новый токен** : 

    * в поле "Сотрудник / Контакт" укажите сотрудника для получения отчета по расписанию.

    * в поле "Разрешенных Scope" укажите report_readonly.


  * Запустите генерацию отчета методом **/report/{id}/generate** — в ответ возвращает requestId.


  * Через некоторое время проверьте готов ли отчет методом **/report/status/{requestId}**


Если отчет готов возвращается объект ReportSave (аналогично с отчетами по расписанию). 


  * Получите данные отчёта по идентификатору сохраненной версии методом **/report/{id}/save/{saveId}/data**.


  


### Особенности генерации


  * Доступно только на тарифе Корпорация.

  * Не чаще чем раз в 10 минут.

  * Не больше одного параллельно формируемого ответа.

  * Отчет формируется от имени и с доступами того, чей токен авторизации указан в REST API.
