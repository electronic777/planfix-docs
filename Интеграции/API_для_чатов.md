## Общие сведения об API


API позволяет подключить к ПланФикс любой ваш собственный чат или подобную ему систему (ленту общения с пользователем). 


Интеграция ПланФикса и стороннего чата позволяет реализовать следующее: 


  * получение в ПланФикс сообщений от сторонней системы, а также данных о контакте из неё в реальном времени;

  * получение в стороннюю систему ответов из ПланФикса в реальном времени.


  

Интеграция должна быть двухсторонней. Поэтому часть запросов ПланФикс посылает в сторону сторонней системы на указанные точки входа, а часть запросов, наоборот, сторонняя система посылает в сторону ПланФикса на единую точку входа. 


Взаимодействие производится по протоколу HTTPS. Авторизация осуществляется по адресу ПланФикса или сторонней системы соответственно и авторизационному ключу, полученному в процессе настройки интеграции. 


## Принцип авторизации и взаимодействия


### HTTPS


  * Запросы к ПланФиксу принимаются только по протоколу HTTPS. Это обеспечивает достаточный уровень безопасности для общения систем через Интернет.

  * В целях безопасности ваших данных, пожалуйста, реализуйте прием запросов на стороне вашей системы также с использованием HTTPS.


  


### Ключ (token)


  * Дополнительно для авторизации каждого запроса к ПланФиксу используется специальный ключ (token). Получить его можно в настройках интеграции.

  * Пожалуйста, реализуйте прием запросов на стороне вашей системы также с использованием ключа (token). Сгенерируйте ключ и вставьте его в соответствующее поле в разделе настройки интеграции.

  * Ключи создаются один раз при настройке интеграции. При необходимости, вы можете сменить ключ на своей стороне и обновить его интерфейсе ПланФикса.


  


### Запросы от сторонней системы к ПланФиксу


  * Запросы необходимо отправлять на указанный в настройках интеграции адрес для приема уведомлений.

  * В теле запроса в специальном поле «token» необходимо всегда передавать специальный ключ.

  * Запросы передаются в application/x-www-form-urlencoded формате


  


### Запросы от ПланФикса к сторонней системе


  * ПланФикс будет отправлять все запросы на указанный в настройках интеграции адрес.

  * В теле сообщений ПланФикс будет передавать указанный вами в веб-кабинете ключ (token).

  * Запросы передаются в application/x-www-form-urlencoded формате


  


### Ответы


  * Все ответы на запросы сторонней системы ПланФикс присылает в формате JSON в теле ответа.

  * Все ответы на запросы ПланФикса сторонняя система должна присылать в формате JSON в теле ответа.


## Подключение в интерфейсе ПланФикса


  * Для подключения и настройки интеграции перейдите в раздел **Интеграции** \- **Чаты** \- **API ПланФикса для чатов**.

  * В открывшемся разделе нажмите **Добавить чат**.

  * Откроется окно настроек интеграции. Из него необходимо взять адрес для отправки запросов в ПланФикс (он свой для каждого аккаунта) и токен, и указать в нём данные интегрируемого чата.

  * **providerId** \- это идентификатор сторонней системы, он может быть любым, и нужен для различия запросов в случае подключения по этому API нескольких разных чатов с пересекающимися идентификаторами.


## Дополнительно


  * В переписке с клиентами для ответа на типовые вопросы вы можете использовать механизм [быстрых ответов](../Общие/Быстрые_ответы.md).
