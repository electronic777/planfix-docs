С помощью [Make](Интеграции/Make.md) можно соединять различные сервисы и приложения для обмена данными. Для примера рассмотрим получение курса валют из ЦБ РФ в пользовательское поле задачи в ПланФиксе: 


  * Шаг № 1: Получаем курс валют в Гугл таблицу

  * Шаг № 2: Настраиваем шаблон задачи в ПланФикс

  * Шаг № 3: Соединяем Гугл таблицу и ПланФикс через Make


  


## Шаг № 1: Получаем курс валют в Гугл таблицу


Курс валют можно получить в виде XML-документа на официальном сайте ЦБ РФ в [специальном разделе](http://www.cbr.ru/development/sxml/): 


![yqzT0q.png](images/yqzT0q.png)


  

Для дальнейшей работы используем только первую часть ссылки, чтобы получать актуальные данные на текущий день: 

    

    

    http://www.cbr.ru/scripts/XML_daily.asp

    


  

Для извлечения данных из XML-документа будем использовать Гугл таблицу и её функцию [IMPORTXML](https://support.google.com/docs/answer/3093342?hl=ru) с запросом [XPath](https://www.w3schools.com/xml/xpath_intro.asp) для поиска данных. В любую ячейку Гугл таблицы вставляем формулу, которая выведет значение курса доллара на текущую дату: 

    

    

    =IMPORTXML("http://www.cbr.ru/scripts/XML_daily.asp"; "//ValCurs/Valute[CharCode=""**USD** ""]/Value")

    


  

Обратите внимание, меняя код валюты в формуле можно вывести в Гугл таблице необходимые курсы валют: 


![WN5xc4.png](images/WN5xc4.png)


  


## Шаг № 2: Настраиваем шаблон задачи в ПланФикс


Для приёма курса валют в ПланФиксе настраиваем [шаблон задачи](Задачи/Шаблоны_задач.md) и добавляем [пользовательские поля](Поля и формы/Пользовательские_поля.md) — «текущий EUR» и «Текущий USD»: 


![rlj9kk.png](images/rlj9kk.png)


  


## Шаг № 3: Соединяем Гугл таблицу и ПланФикс через Make


  * После регистрации в [Make](https://www.make.com/en/register?utm_source=planfix-app&utm_medium=partner&utm_campaign=planfix-app-partner-program) пройдите по пути: **Dashboard** — **Create a new scenario** :


![8MU7Uz.png](images/8MU7Uz.png)


  


  * Выберите нужные сервисы для интеграции. В нашем примере это Гугл таблицы и ПланФикс. Затем нажмите кнопку **Continue** :


![9bg6n4.png](images/9bg6n4.png)


  


  * Откроется окно создания интеграции. На этом этапе необходимо подключить Гугл таблицы и ПланФикс к Make:


![vX2DUi.png](images/vX2DUi.png)


  


  * Кликните на Гугл таблицу и выберите событие **Get a Cell** :


![hWNnas.png](images/hWNnas.png)


  


  * Теперь необходимо подключить Гугл таблицу к Make. Нажмите кнопку **Add**. На следующем шаге задайте имя соединения с Гугл таблицей и создайте соединение, разрешив Make доступ к вашему Гугл-аккаунту:


![BJfCD0.png](images/BJfCD0.png)


![YT8Bkl.png](images/YT8Bkl.png)


  


  * Когда Make подключился к аккаунту, заполните окно необходимыми данными — название гугл-таблицы (1), номер листа (2), номер ячейки (3), в которую вставляли формулу получения курса валюты:


![wcj2rA.png](images/wcj2rA.png)


  


  * То же самое проделайте для всех валют, данные которых планируете получать в ПланФиксе:


![fjTXpw.png](images/fjTXpw.png)


  


  * На последнем этапе подключите ПланФикс. Make соберет все значения курсов валют из таблицы и на последнем шаге создаст задачу, куда передаст собранные данные:


![Uw6Vbx.png](images/Uw6Vbx.png)


![xxwg8g.png](images/xxwg8g.png)


  


  * Когда Make подключился к аккаунту ПланФикс, настройте соединение:


    


  * Найдите **Template ID** и укажите шаблон, по которому будет создаваться задача в ПланФиксе.

  * В поле **Custom Data** укажите пользовательские поля, которые созданы для значений курса валют.


![aJdpVD.png](images/aJdpVD.png)


![rYB99p.png](images/rYB99p.png)


  


  * После всех настроек запустите тест, нажав кнопку **Run once** :


![6MhajV.png](images/6MhajV.png)


  


  * Если все настройки выполнены корректно, в ПланФиксе создастся новая задача с курсами валют:


![ftA754.png](images/ftA754.png)


  


  * Завершая настройки, укажите время ежедневного срабатывания сценария, чтобы в ПланФикс каждый день поступали актуальные данные курсов валют:


![eelyEb.png](images/eelyEb.png)
