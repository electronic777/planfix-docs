ПланФикс умеет разбирать на [инфоблоки](Правило_для_почты__Извлечение_данных.md) данные из html-таблиц в письмах: 


![IBihmu.png](images/IBihmu.png)


  

Извлечение данных настраивается в [правилах почты](../Доступ и права/Создание_и_редактирование_правил.md): 


![LXTrTe.png](images/LXTrTe.png)


  


## Алгоритм настройки


  * Получаем письмо в ПланФикс.

  * Копируем адрес созданной задачи из адресной строки браузера или [прямо в ПланФиксе](https://p.pfx.so/pf/el/9vLo36.png).

  * Настраиваем почтовое правило.

  * [Находим номер таблицы](https://p.pfx.so/pf/hp/OefvnB.gif) для разбора, используя тестирование.

  * Добавляем нужные инфоблоки, другие операции и сохраняем правило.

  * Повторно отправляем тестовое письмо, убеждаясь в правильности разбора.


  

Обратите внимание, существует несколько вариантов извлечения данных из строк HTML-таблицы: 


![IxriRG.png](images/IxriRG.png)


  


  * **Порядковый номер таблицы** — это таблица по порядку нахождения тега <table> в HTML-письме.

  * **Всё содержимое** — вариант нужен прежде всего, чтобы проверить в ту ли таблицу вы попали, т.к. часто в письмах вёрстка тоже таблицами. Это усложняет поиск нужного номера.

  * **Все строки** — вариант нужен для того, чтобы из данных таблиц потом создавать записи аналитик.

  * **Последняя строка** — вариант нужен, чтобы получить итог в таблице.

  * **Конкретный столбец и конкретная строка** — вариант нужен в тех случаях, когда письмо свёрстано таблицей, а нужные данные, например имя или телефон, лежат в конкретной ячейке в таблице.


  


## Пример


Вариант извлечения данных из конкретного столбца и строки рассмотрим на примере получения номера заказа из письма: 


![tnki1l.jpg](images/tnki1l.jpg)


  

Настройка в правиле почты выглядит так: 


![35aVVS.png](images/35aVVS.png)


  


## Важно


Иногда данные внутри таблицы расположены не в ячейке, а в другой отдельной таблице, состоящей из одного поля — получается таблица в ячейке таблицы. В итоге визуально человек видит одну таблицу, а по факту это набор несвязанных между собой таблиц. В этом случае будут сложности с извлечением данных по строкам. Учитывайте этот момент при разборе. 


  


## Дополнительная информация


  * В блоге ПланФикса: [разбор html-таблиц на инфоблоки](https://planfix.com/ru/blog/razbor-html-tablic-na-infobloki/)
